jQuery(document).ready(function(e){function a(a){e(document).on("click",".playVidBtn",function(t){t.preventDefault();var i=e(this).attr("data-type"),n=e(this).parents(".videoIframeDiv");if("youtube"==i){e(this).attr("data-embed");n.find("iframe.videoIframe")[0].src+="&autoplay=1",n.addClass("playing"),n.find("iframe.videoIframe").fadeIn(),o=!0,a.stop()}else if("vimeo"==i){var s=n.find("iframe.videoIframe")[0],r=new Vimeo.Player(s);n.addClass("playing"),n.find("iframe.videoIframe").fadeIn(),r.play(),a.stop()}})}e(".menu-toggle").on("click",function(a){a.preventDefault(),e("body").addClass("nav-open"),e("#site-navigation").addClass("open")}),e("#closeNav,#overlay").on("click",function(a){a.preventDefault(),e("body").removeClass("nav-open"),e("#site-navigation").removeClass("open"),e("#site-navigation *").removeClass("open"),e("#site-navigation li.parent-link").removeClass("active"),e("#site-navigation").removeClass("child-open")}),e("#closeNavChild").on("click",function(a){a.preventDefault(),e("#childrenNavs").removeClass("open"),e(".children-group").removeClass("open"),e("#site-navigation li.parent-link").removeClass("active"),e("#site-navigation").removeClass("child-open")}),e(document).on("click",".navigation a.parentlink",function(a){a.preventDefault();var t=e(this).attr("href");if("#"==t){var o=e(this).attr("data-parent");e("#site-navigation li.parent-link").removeClass("active"),e(".children-group").removeClass("open"),e(".children-group"+o).length>0&&(e("#site-navigation").addClass("child-open"),e("#childrenNavs").addClass("open"),e(".children-group"+o).addClass("open"),e(this).addClass("active"),e(this).parents("li").addClass("active"))}}),e("[data-fancybox]").fancybox({youtube:{controls:0,showinfo:0,rel:0},vimeo:{color:"ffffff"}});var t=e(window).scrollTop();t>200&&e("body").addClass("scrolled"),e(window).scroll(function(){var a=e(window).scrollTop();a>200?e("body").addClass("scrolled"):e("body").removeClass("scrolled")}),e("#banner").length>0&&e("#pageTabs").length>0&&e(window).scroll(function(){var a=e("#pageTabs").height();if(e(".main-description").length>0){var t=e(".main-description").height();a=t}var o=e("#banner").height(),i=o+a,n=e(window).scrollTop();n>i?e("#pageTabs").addClass("fixed-top"):e("#pageTabs").removeClass("fixed-top")}),e(".subpage-sliders").length>0&&e(".subpage-sliders").flexslider({animation:"fade",smoothHeight:!0}),e(".video__vimeo").length>0&&e(".video__vimeo").each(function(){var a=e(this),t=e(this).attr("data-url"),o="https://vimeo.com/api/oembed.json?url="+t;e.get(o,function(e){var t=e.thumbnail_url;a.css("background-image","url('"+t+"')")})});var o=!1,i=e(".flexslider .slides li");i.length>0&&i.eq(1).add(i.eq(-1)).find("img.lazy").each(function(){var a=e(this).attr("data-src");e(this).removeClass("lazy"),e(this).attr("src",a).removeAttr("data-src")});e(".flexslider").flexslider({animation:"fade",smoothHeight:!0,before:function(a){var t=e(a.slides),o=a.animatingTo,i=o,n=i+1,s=i-1;t.length>0&&(t.eq(i).add(t.eq(n)).add(t.eq(s)).find("img.lazy").each(function(){var a=e(this).attr("data-src");e(this).removeClass("lazy"),e(this).attr("src",a).removeAttr("data-src")}),t.eq(i).find(".videoIframe").length>0?(e(".videoIframeDiv").removeClass("playing"),e(".videoIframe").hide(),e("body").addClass("current-slide-is-video")):e("body").removeClass("current-slide-is-video"))},start:function(t){var o=e(t.slides);o.length>0&&a(t)}});e(document).on("click",".flex-next, .flex-prev",function(a){a.preventDefault(),e("iframe.videoIframe").length>0&&e("iframe.videoIframe").each(function(){var t=e(this).attr("data-vid");if("youtube"==t){var o=e(this).parents(".videoIframeDiv"),i=o.find(".playVidBtn").attr("data-embed");"Next"==a.target.outerText&&e(this).attr("src",i)}else if("vimeo"==t){var n=e(this)[0],s=new Vimeo.Player(n);s.pause()}})}),e(document).on("click",function(a){var t=(e(this),["todayToggle","todayLink","todayTxt","today-options"]),o=a.target.id;"today-options"==o?e(".topinfo .today").addClass("open"):e.inArray(o,t)!=-1?e(".topinfo .today").hasClass("open")?e(".topinfo .today").removeClass("open"):e(".topinfo .today").addClass("open"):e(".topinfo .today").removeClass("open")}),e('a[href*="#"]:not([href="#"])').click(function(){var a=e("#masthead").height(),t=a+80;if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var o=e(this.hash);if(o=o.length?o:e("[name="+this.hash.slice(1)+"]"),o.length)return e("html, body").animate({scrollTop:o.offset().top-t},1e3),!1}}),e("#loadMoreBtn").on("click",function(a){a.preventDefault();var t=e(this),o=void 0!=typeof e("a.page-numbers").eq(0)?e("a.page-numbers").attr("href"):"",i=e(this).attr("data-current"),n=parseInt(i)+1,s=e(this).attr("data-end");if(o){var r=o.split("pg="),l=r[1],d=o.replace("pg="+l,"pg="+n);t.attr("data-current",n),e(".next-posts").load(d+" .posts-inner .flex-inner",function(){var a=e(".next-posts .flex-inner").html();e("#data-container .flex-inner").append(a),e(".next-posts").html(""),n==s&&e(".loadmorediv").html("").hide()})}}),e("#playYoutube").on("click",function(a){e(this).hide(),e(".videoIframeDiv").addClass("play_video"),e(".videoIframe")[0].src+="&autoplay=1",e("#banner").addClass("video-playing"),a.preventDefault()}),(new WOW).init(),e(".js-blocks").matchHeight(),e(document).on("click","#toggleMenu",function(){e(this).toggleClass("open"),e("body").toggleClass("open-mobile-menu")}),e(document).on("click","#topsearchBtn",function(a){a.preventDefault(),e("#topSearchBar form").submit()}),e(document).on("click","#searchHereBtn",function(a){a.preventDefault(),e(this).toggleClass("search-open"),e("#topSearchBar").toggleClass("show"),e("body").toggleClass("search-form-open"),e("input.search-field").focus()}),e(document).on("click","#closeTopSearch",function(a){a.preventDefault(),e("#searchHereBtn").removeClass("search-open"),e("#topSearchBar").removeClass("show"),e("body").removeClass("search-form-open")}),e('#footSubscribeForm input[type="email"]').on("focus",function(){e("#footSubscribeForm").addClass("input-focus")}),e('#footSubscribeForm input[type="email"]').on("focusout blur",function(){e("#footSubscribeForm").removeClass("input-focus")})});